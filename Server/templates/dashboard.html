<!DOCTYPE html>
<html>
<head>
    <title>ğŸ“Š App Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        /* ğŸ‘‡ sirf button ko top-right corner me lane ke liye */
        .top-right {
            position: absolute;
            top: 20px;
            right: 20px;
        }
    </style>
</head>
<body>

    <div class="top-right">
        <form action="/go_to_analysis">
            <button type="submit">â¡ï¸ Open Analysis Dashboard</button>
        </form>
    </div>

    <h1>ğŸ“± App Server Dashboard</h1>
    <p>Monitor client uploads and manage reports</p>

    <h2>ğŸ“¥ Received Data</h2>
    <table>
        <tr><th>Client</th><th>Type</th><th>Value</th></tr>
        {% for item in data %}
        <tr>
            <td>{{ item.client }}</td>
            <td>{{ item.type }}</td>
            <td>{{ item.value }}</td>
        </tr>
        {% endfor %}
    </table>

    <h2>ğŸ“¦ Uploaded Files</h2>
    <table>
        <tr><th>Filename</th><th>Action</th></tr>
        {% for f in files %}
        <tr>
            <td>{{ f }}</td>
            <td><a href="/download/{{ f }}" class="btn">â¬‡ï¸ Download</a></td>
        </tr>
        {% endfor %}
    </table>

    <hr>

    <h2>ğŸ“„ Upload PDF Report</h2>
    <form action="/upload_pdf" method="post" enctype="multipart/form-data">
        <input type="file" name="pdf_file" accept="application/pdf" required>
        <button type="submit">ğŸ“¤ Upload PDF</button>
    </form>

    <hr>

    <h2>ğŸ“¤ Send PDF to a Client</h2>
    {% if clients %}
    <form onsubmit="sendPDF(event)">
        <label>Select Client:</label>
        <select id="clientSelect" required>
            {% for c in clients %}
            <option value="{{ c }}">{{ c }}</option>
            {% endfor %}
        </select>
        <button type="submit">ğŸ“¨ Send PDF</button>
    </form>
    {% else %}
    <p style="color: gray;">âš ï¸ No clients connected yet.</p>
    {% endif %}

    <script>
        function sendPDF(e) {
            e.preventDefault();
            const client = document.getElementById('clientSelect').value;
            window.location.href = `/send_pdf/${client}`;
        }
    </script>

    <footer>
        <p>Server Dashboard Â© 2025 | Powered by Flask ğŸ</p>
        <p>Made by <b>Shubhangi Yadav</b></p>

    </footer>
</body>
</html>
